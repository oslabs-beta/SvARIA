{"version":3,"file":"Button_ts-C-PV7mXT.js","sources":["../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../../src/lib/ARIAChecks.ts","../../../src/lib/Button_ts.svelte"],"sourcesContent":["import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","import type { ARIAColorsObj } from '../types.js';\r\nimport { rgb, score } from 'wcag-contrast';\r\n\r\n\r\nconst toRGBArray = (rgbStr) => rgbStr.match(/\\d+/g).map(Number);\r\n\r\nexport function ariaLabelcheck(curNode: HTMLElement): void {\r\n\tif (import.meta.env.VITE_SVARIA_MODE != 'debug') {\r\n\t\treturn;\r\n\t}\r\n\t// console.log(curNode.attributes);\r\n\t// console.log('current node', curNode.nodeName);\r\n\r\n\tif (curNode.attributes['aria-label']) {\r\n\t\t//console.log(`${curNode.nodeName}, with id of ${curNode.id}: check passed: aria-label present`);\r\n\t}\r\n\tif (!curNode.attributes['aria-label']) {\r\n\t\tconsole.warn(\r\n\t\t\t`${curNode.nodeName}, with id of ${curNode.id}: This type of element requires a property called an aria-label. Please add one`\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport function getColors(curNode: HTMLElement): ARIAColorsObj {\r\n\tconst compStyles = window.getComputedStyle(curNode);\r\n\t// console.log('color: ', curNode.nodeName, curNode.id, compStyles.getPropertyValue('color'));\r\n\t// console.log(\r\n\t// \t'bg-color: ',\r\n\t// \tcurNode.nodeName,\r\n\t// \tcurNode.id,\r\n\t// \tcompStyles.getPropertyValue('background-color')\r\n\t// );\r\n\r\n\tlet backgroundColor = compStyles.getPropertyValue('background-color');\r\n\r\n\tlet iterations = 0;\r\n\t//check parent for background color for up to 3 iterations\r\n\tlet parentNode = curNode.parentNode;\r\n\twhile (backgroundColor == 'rgba(0, 0, 0, 0)' && iterations < 3) {\r\n\t\t//console.log('parent node: ',parentNode.nodeName, 'parent node id:', parentNode.id)\r\n\t\t//console.log('parent color', window.getComputedStyle(parentNode).getPropertyValue(\"background-color\"))\r\n\t\tconst compStylesParent = window.getComputedStyle(parentNode as Element);\r\n\t\tbackgroundColor = compStylesParent.getPropertyValue('background-color');\r\n\t\titerations++;\r\n\t\tparentNode = parentNode.parentNode;\r\n\t}\r\n\r\n\tif (backgroundColor == 'rgba(0, 0, 0, 0)') {\r\n\t\t//console.log('No background color found defaulting to white');\r\n\t\tbackgroundColor = 'rgb(255, 255, 255)';\r\n\t}\r\n\r\n\tlet foregroundColor = compStyles.getPropertyValue('color');\r\n\r\n\tconst compStylesParent = window.getComputedStyle(parentNode as Element);\r\n\tlet parentBackgroundColor = compStylesParent.getPropertyValue('background-color');\r\n\twhile (parentBackgroundColor == 'rgba(0, 0, 0, 0)' && iterations < 3) {\r\n\t\t//console.log('parent node: ',parentNode.nodeName, 'parent node id:', parentNode.id)\r\n\t\t//console.log('parent color', window.getComputedStyle(parentNode).getPropertyValue(\"background-color\"))\r\n\t\tconst compStylesParent = window.getComputedStyle(parentNode as Element);\r\n\t\tparentBackgroundColor = compStylesParent.getPropertyValue('background-color');\r\n\t\titerations++;\r\n\t\tparentNode = parentNode.parentNode;\r\n\t}\r\n\r\n\tif (parentBackgroundColor == 'rgba(0, 0, 0, 0)') {\r\n\t\t//console.log('No parent background color found setting to null');\r\n\t\tparentBackgroundColor = null;\r\n\t}\r\n\r\n\treturn { backgroundColor, foregroundColor, parentBackgroundColor };\r\n}\r\n\r\nexport function colorContrastCheck(curNode: HTMLElement): void {\r\n\tif (import.meta.env.VITE_SVARIA_MODE != 'debug') {\r\n\t\treturn;\r\n\t}\r\n\tconst { parentBackgroundColor, foregroundColor, backgroundColor } = getColors(curNode);\r\n\tcheckColors(curNode, foregroundColor, backgroundColor, false);\r\n}\r\n\r\nexport function parentColorContrastCheck(curNode: HTMLElement): void {\r\n\tconst { parentBackgroundColor, foregroundColor, backgroundColor } = getColors(curNode);\r\n\r\n\tif (parentBackgroundColor == null) console.log('Cannot check parent background color');\r\n\telse checkColors(curNode, backgroundColor, parentBackgroundColor, true);\r\n}\r\n\r\nfunction checkColors(\r\n\tcurNode: HTMLElement,\r\n\tforegroundColor: string,\r\n\tbackgroundColor: string,\r\n\tisParent: boolean\r\n): void {\r\n\tconst parentString = isParent ? \"'s parent\" : '';\r\n\t\r\n\tif (foregroundColor === backgroundColor) {\r\n\t\tconsole.error(\r\n\t\t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and text colors do not meet contrast requirement, please adjust colors`\r\n\t\t);\r\n\t\treturn;\r\n\t}\r\n\r\n\t// =================> API check logic <==================\r\n\t// // convert rgb values to an array of numbers \r\n\t// const fgArray = toRGBArray(foregroundColor)\r\n\t// const bgArray = toRGBArray(backgroundColor)\r\n\t\r\n\t// // run color contrast checker install \r\n\t// const result = rgb(fgArray, bgArray);\r\n\t// const _score = score(result)\r\n\t// // console.log('id: ', curNode.id, 'result: ', result, 'score: ', _score)\r\n\t// if(_score == \"AA\") {console.warn(\r\n\t// \t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors contrast colors can be improved`\r\n\t// );}\r\n\t// if(_score == \"Fail\"){\r\n\t// \tconsole.error(\r\n\t// \t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors do not meet contrast requirement, please adjust colors`\r\n\t// \t);}\r\n\r\n// =============================================================\r\n\r\n\r\n// =================> API check logic <==================\r\n\tfetch('https://www.aremycolorsaccessible.com/api/are-they', {\r\n\t\tmode: 'cors',\r\n\t\tmethod: 'POST',\r\n\t\tbody: JSON.stringify({ colors: [backgroundColor, foregroundColor] })\r\n\t})\r\n\t\t.then((response) => response.json())\r\n\t\t.then((json) => {\r\n\t\t\t//console.log(json)\r\n\t\t\tif (json.overall == 'Yup') {\r\n\t\t\t\t// console.log(`${curNode.nodeName}${parentString}, with id of ${curNode.id}: color contrast check passed`);\r\n\t\t\t} else if (json.overall == 'Kinda') {\r\n\t\t\t\tconsole.warn(\r\n\t\t\t\t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors contrast colors can be improved`\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\r\n\t\t\t\t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors do not meet contrast requirement, please adjust colors`\r\n\t\t\t\t);\r\n\t\t\t\t// console.error(\r\n\t\t\t\t// \t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: BG: ${backgroundColor} FG: ${foregroundColor}`\r\n\t\t\t\t// );\r\n\t\t\t}\r\n\t\t});\r\n\t//console.log('class', curNode.attributes[\"class\"])\r\n// =============================================================\r\n}\r\n","<script lang=\"ts\">\r\n\timport { ariaLabelcheck, colorContrastCheck, parentColorContrastCheck } from './ARIAChecks.ts';\r\n\timport type { ButtonType } from '../types.ts';\r\n\texport let content: string = 'This is a button';\r\n\texport let ariaLabel: string = content;\r\n\texport let id: string = '';\r\n\texport let style: string = '';\r\n\texport let className: string = 'bg-black text-white text-bold hover:bg-gray-700';\r\n\texport let type: ButtonType = 'button';\r\n</script>\r\n\r\n<button\r\n\tuse:ariaLabelcheck\r\n\tuse:colorContrastCheck\r\n\tuse:parentColorContrastCheck\r\n\t{id}\r\n\taria-label={ariaLabel}\r\n\tclass={className}\r\n\ton:click\r\n\t{style}\r\n\t{type}>{content}</button\r\n>"],"names":["compStylesParent"],"mappings":"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","x_google_ignoreList":[0]}