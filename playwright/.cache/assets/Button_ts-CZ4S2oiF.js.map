{"version":3,"file":"Button_ts-CZ4S2oiF.js","sources":["../../../src/lib/ARIAChecks.ts","../../../src/lib/Button_ts.svelte"],"sourcesContent":["import type { ARIAColorsObj } from '../types.js';\nimport { rgb, score } from 'wcag-contrast';\n\n\nconst toRGBArray = (rgbStr) => rgbStr.match(/\\d+/g).map(Number);\n\nexport function ariaLabelcheck(curNode: HTMLElement): void {\n\tif (import.meta.env.VITE_SVARIA_MODE != 'debug') {\n\t\treturn;\n\t}\n\t// console.log(curNode.attributes);\n\t// console.log('current node', curNode.nodeName);\n\n\tif (curNode.attributes['aria-label']) {\n\t\tconsole.log(`${curNode.nodeName}, with id of ${curNode.id}: check passed: aria-label present`);\n\t}\n\tif (!curNode.attributes['aria-label']) {\n\t\tconsole.warn(\n\t\t\t`${curNode.nodeName}, with id of ${curNode.id}: This type of element requires a property called an aria-label. Please add one`\n\t\t);\n\t}\n}\n\nexport function getColors(curNode: HTMLElement): ARIAColorsObj {\n\tconst compStyles = window.getComputedStyle(curNode);\n\t// console.log('color: ', curNode.nodeName, curNode.id, compStyles.getPropertyValue('color'));\n\t// console.log(\n\t// \t'bg-color: ',\n\t// \tcurNode.nodeName,\n\t// \tcurNode.id,\n\t// \tcompStyles.getPropertyValue('background-color')\n\t// );\n\n\tlet backgroundColor = compStyles.getPropertyValue('background-color');\n\n\tlet iterations = 0;\n\t//check parent for background color for up to 3 iterations\n\tlet parentNode = curNode.parentNode;\n\twhile (backgroundColor == 'rgba(0, 0, 0, 0)' && iterations < 3) {\n\t\t//console.log('parent node: ',parentNode.nodeName, 'parent node id:', parentNode.id)\n\t\t//console.log('parent color', window.getComputedStyle(parentNode).getPropertyValue(\"background-color\"))\n\t\tconst compStylesParent = window.getComputedStyle(parentNode as Element);\n\t\tbackgroundColor = compStylesParent.getPropertyValue('background-color');\n\t\titerations++;\n\t\tparentNode = parentNode.parentNode;\n\t}\n\n\tif (backgroundColor == 'rgba(0, 0, 0, 0)') {\n\t\t//console.log('No background color found defaulting to white');\n\t\tbackgroundColor = 'rgb(255, 255, 255)';\n\t}\n\n\tlet foregroundColor = compStyles.getPropertyValue('color');\n\n\tconst compStylesParent = window.getComputedStyle(parentNode as Element);\n\tlet parentBackgroundColor = compStylesParent.getPropertyValue('background-color');\n\twhile (parentBackgroundColor == 'rgba(0, 0, 0, 0)' && iterations < 3) {\n\t\t//console.log('parent node: ',parentNode.nodeName, 'parent node id:', parentNode.id)\n\t\t//console.log('parent color', window.getComputedStyle(parentNode).getPropertyValue(\"background-color\"))\n\t\tconst compStylesParent = window.getComputedStyle(parentNode as Element);\n\t\tparentBackgroundColor = compStylesParent.getPropertyValue('background-color');\n\t\titerations++;\n\t\tparentNode = parentNode.parentNode;\n\t}\n\n\tif (parentBackgroundColor == 'rgba(0, 0, 0, 0)') {\n\t\t//console.log('No parent background color found setting to null');\n\t\tparentBackgroundColor = null;\n\t}\n\n\treturn { backgroundColor, foregroundColor, parentBackgroundColor };\n}\n\nexport function colorContrastCheck(curNode: HTMLElement): void {\n\tif (import.meta.env.VITE_SVARIA_MODE != 'debug') {\n\t\treturn;\n\t}\n\tconst { parentBackgroundColor, foregroundColor, backgroundColor } = getColors(curNode);\n\tcheckColors(curNode, foregroundColor, backgroundColor, false);\n}\n\nexport function parentColorContrastCheck(curNode: HTMLElement): void {\n\tconst { parentBackgroundColor, foregroundColor, backgroundColor } = getColors(curNode);\n\n\tif (parentBackgroundColor == null) console.log('Cannot check parent background color');\n\telse checkColors(curNode, backgroundColor, parentBackgroundColor, true);\n}\n\nfunction checkColors(\n\tcurNode: HTMLElement,\n\tforegroundColor: string,\n\tbackgroundColor: string,\n\tisParent: boolean\n): void {\n\tconst parentString = isParent ? \"'s parent\" : '';\n\t\n\tif (foregroundColor === backgroundColor) {\n\t\tconsole.error(\n\t\t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and text colors do not meet contrast requirement, please adjust colors`\n\t\t);\n\t\treturn;\n\t}\n\n\t// =================> API check logic <==================\n\t// // convert rgb values to an array of numbers \n\t// const fgArray = toRGBArray(foregroundColor)\n\t// const bgArray = toRGBArray(backgroundColor)\n\t\n\t// // run color contrast checker install \n\t// const result = rgb(fgArray, bgArray);\n\t// const _score = score(result)\n\t// // console.log('id: ', curNode.id, 'result: ', result, 'score: ', _score)\n\t// if(_score == \"AA\") {console.warn(\n\t// \t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors contrast colors can be improved`\n\t// );}\n\t// if(_score == \"Fail\"){\n\t// \tconsole.error(\n\t// \t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors do not meet contrast requirement, please adjust colors`\n\t// \t);}\n\n// =============================================================\n\n\n// =================> API check logic <==================\n\tfetch('https://www.aremycolorsaccessible.com/api/are-they', {\n\t\tmode: 'cors',\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify({ colors: [backgroundColor, foregroundColor] })\n\t})\n\t\t.then((response) => response.json())\n\t\t.then((json) => {\n\t\t\t//console.log(json)\n\t\t\tif (json.overall == 'Yup') {\n\t\t\t\t// console.log(`${curNode.nodeName}${parentString}, with id of ${curNode.id}: color contrast check passed`);\n\t\t\t} else if (json.overall == 'Kinda') {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors contrast colors can be improved`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconsole.error(\n\t\t\t\t\t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: Background and foreground colors do not meet contrast requirement, please adjust colors`\n\t\t\t\t);\n\t\t\t\t// console.error(\n\t\t\t\t// \t`${curNode.nodeName}${parentString}, with id of ${curNode.id}: BG: ${backgroundColor} FG: ${foregroundColor}`\n\t\t\t\t// );\n\t\t\t}\n\t\t});\n\t//console.log('class', curNode.attributes[\"class\"])\n// =============================================================\n}\n","<script lang=\"ts\">\n\timport { ariaLabelcheck, colorContrastCheck, parentColorContrastCheck } from './ARIAChecks.ts';\n\timport type { ButtonType } from '../types.ts';\n\texport let content: string = 'This is a button';\n\texport let ariaLabel: string = content;\n\texport let id: string = '';\n\texport let style: string = '';\n\texport let className: string = 'bg-black text-white text-bold hover:bg-gray-700';\n\texport let type: ButtonType = 'button';\n</script>\n\n<button\n\tuse:ariaLabelcheck\n\tuse:colorContrastCheck\n\tuse:parentColorContrastCheck\n\t{id}\n\taria-label={ariaLabel}\n\tclass={className}\n\ton:click\n\t{style}\n\t{type}>{content}</button\n>"],"names":["compStylesParent"],"mappings":"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"}